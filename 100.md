NIP-100
======

Chess
-------------------------------

`draft` `author:JellyCZYT`

This NIP defines new protocol event kinds for enabling playing chess.

# Event Kinds (Client to Relay)
## Search for opponent (Event kind 5000)
`NOTE:` You need to call this event every time game ends for starting another.
For example:
```json
{
  "id": <32-bytes lowercase hex-encoded sha256 of the serialized event data>,    
  "kind": 5000,
  "content": "connect",
  "sig": <64-bytes hex of the signature of the sha256 hash of the serialized event data, which is the same as the "id" field>
}
```

Relay will send `OK` message:
```
["OK", "b1a649ebe8...", true, <json format defined under>]
```

```json
{
  "id": <32-bytes lowercase hex-encoded sha256 of the serialized event data>,
  "pubkey": <your public key>,    
  "kind": 5000,
  "content": "invite",
  "sig": <64-bytes hex of the signature of the sha256 hash of the serialized event data, which is the same as the "id" field>
}
```
After game is found relay sends `OK` message means that game started:
```
["OK", "b1a649ebe8...", true, <color of your pieces>]
```
## Making a move (Event kind 5001)
```json
{
  "id": <32-bytes lowercase hex-encoded sha256 of the serialized event data>,
  "pubkey": <your public key>,    
  "kind": 5001,
  "content": <your move in uci format>,
  "sig": <64-bytes hex of the signature of the sha256 hash of the serialized event data, which is the same as the "id" field>
}
```
`NOTE:` You don´t need any game IDs, becuase client can only play one game at time.


Relay will respond using `OK` message:
```
["OK", "b1a649ebe8...", true, ""]
```
`true` means that move is valid otherwise it is invalid (If you have 2 invalid moves game ends).
## Offering draw (Event kind 5002)
You can only offer a draw after you made a move.

```json
{
  "id": <32-bytes lowercase hex-encoded sha256 of the serialized event data>,
  "pubkey": <your public key>,    
  "kind": 5002,
  "content": "offer",
  "sig": <64-bytes hex of the signature of the sha256 hash of the serialized event data, which is the same as the "id" field>
}
```
Replay will respond to the offer using `OK` message:
```
["OK", "b1a649ebe8...", true, "offer"]
```
When your opponent offers a draw replay will send you `EVENT` message:
```
["EVENT", 5002, <event JSON as defined under>]
```

```json
{    
  "kind": 5002,
  "content": "sentoffer",
  "sig": <standard signature (NIP-01) encrypted using oponnent´s private key>
}
```
